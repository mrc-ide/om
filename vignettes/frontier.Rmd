---
title: "Cost-effectiveness frontier"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Cost-effectiveness frontier}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(om)
```

This vignette demonstrates how to find the cost-effectiveness frontier using
`frontier()`. We'll create a small simulated data set with cost and impact
values and then highlight the solutions that lie on the frontier. We also apply
a *threshold* that limits the maximum cost per unit of impact gained. The World
Health Organization suggests that interventions costing up to 1â€“3 times a
country's GDP per capita for each disability-adjusted life year (DALY) gained
are often considered cost-effective. In our generic example this simply means
setting an upper limit on the cost divided by impact.

```{r}
set.seed(1)
example <- data.frame(
  cost = runif(50, 1, 10)
)
example$impact <- 15 + example$cost + rnorm(50)

```

We can visualise the frontier relative to all generated points. Points that lie
on the frontier are shown in **blue**, while those filtered out by the
threshold are coloured **red**. The dotted line shows the threshold cost per
impact.

```{r, fig.width = 6, fig.height = 5}
frontier_solution <- frontier(example)
plot(
  example$impact ~ example$cost,
  pch = 19,
  xlab = "Cost",
  ylab = "Impact",
  col = "grey50"
  )
points(frontier_solution$impact ~ frontier_solution$cost, col = "deeppink", pch = 19)
legend(
  "bottomright",
  legend = c("Dominated solutions", "Efficient frontier"),
  col = c("grey50", "deeppink"),
  pch = 19,
  bty = "n"
)
```

We can also drop dominant solutions that fall outside of a user-specified
ICER threshold:

```{r, fig.width = 6, fig.height = 5}
frontier_threshold_solution <- frontier(example, threshold = 1)
plot(
  example$impact ~ example$cost,
  pch = 19,
  xlab = "Cost",
  ylab = "Impact",
  col = "grey50"
  )
points(frontier_solution$impact ~ frontier_solution$cost, col = "deeppink", pch = 19)
points(frontier_threshold_solution$impact ~ frontier_threshold_solution$cost, col = "dodgerblue", pch = 19)
legend(
  "bottomright",
  legend = c("Dominated solutions", "Efficient frontier", "Above ICER threshold"),
  col = c("grey50", "dodgerblue", "deeppink"),
  pch = 19,
  bty = "n"
)
```

