<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="om">
<title>Introduction • om</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction">
<meta property="og:description" content="om">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">om</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Introduction.html">Introduction</a>
    <a class="dropdown-item" href="../articles/complex-budgets.html">Complex budgets</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="Introduction_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introduction</h1>
            
      
      
      <div class="d-none name"><code>Introduction.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">om</span><span class="op">)</span>
<span class="co">#&gt; Loading required package: ROI.plugin.glpk</span>
<span class="co">#&gt; Loading required package: ompr</span>
<span class="co">#&gt; Loading required package: ompr.roi</span></code></pre></div>
<p><img src="omland_flag.png" align="right" width="30%" height="30%/"></p>
<p>We are often faced with challenging questions such as “what is the optimum mix of spatially-disaggregated interventions?”. Answering questions of this kind is usually made more difficult by the fact that, in most cases, there are budget limitations in place which mean we can’t afford all possible combinations of intervention packages. om is here to help with this kind of budget-constrained optimisation challenge for malaria modelling.</p>
<p>First, let’s create a simple scenario to test out om. In our country, Omland, there are 10 sub-national units where different malaria intervention packages can be stratified. For each sub-national unit there are 5 different intervention packages that could be implemented. For each sub-national unit and intervention package we can estimate the impact and cost using a malaria simulation model. Unfortunately, Omland has a finite health budget and can only assign $100 to malaria interventions.</p>
<p>How should Omland spend the $100 to maximise the impact of their malaria control campaign?</p>
<p>Let’s start with some malaria model outputs for Omland. This is a data.frame showing the modelled cost and impact of each intervention package option, for each sub-national unit.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">omland_output</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  unit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, each <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,
  option <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span>,
  impact <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">10</span><span class="op">)</span>,
  cost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">15</span>, <span class="fl">20</span><span class="op">)</span>, <span class="fl">10</span><span class="op">)</span>  <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">omland_output</span><span class="op">)</span>
<span class="co">#&gt;   unit option impact cost</span>
<span class="co">#&gt; 1    1      1      0    0</span>
<span class="co">#&gt; 2    1      2      1    5</span>
<span class="co">#&gt; 3    1      3      2   10</span>
<span class="co">#&gt; 4    1      4      3   15</span>
<span class="co">#&gt; 5    1      5      4   20</span>
<span class="co">#&gt; 6    2      1      0    0</span></code></pre></div>
<p>We also can specify the budget</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">budget</span> <span class="op">&lt;-</span> <span class="fl">100</span></code></pre></div>
<p>To optimise Omland’s budget spend in R, we need to provide some inputs as matrices, lets convert our <code>data.frame</code> now</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Each row is a spatial unit, each column and intervention package</span>
<span class="va">impact_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="va">omland_output</span><span class="op">$</span><span class="va">impact</span>, nrow <span class="op">=</span> <span class="fl">10</span>, ncol <span class="op">=</span>  <span class="fl">5</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">impact_matrix</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5]</span>
<span class="co">#&gt;  [1,]    0    1    2    3    4</span>
<span class="co">#&gt;  [2,]    0    1    2    3    4</span>
<span class="co">#&gt;  [3,]    0    1    2    3    4</span>
<span class="co">#&gt;  [4,]    0    1    2    3    4</span>
<span class="co">#&gt;  [5,]    0    1    2    3    4</span>
<span class="co">#&gt;  [6,]    0    1    2    3    4</span>
<span class="co">#&gt;  [7,]    0    1    2    3    4</span>
<span class="co">#&gt;  [8,]    0    1    2    3    4</span>
<span class="co">#&gt;  [9,]    0    1    2    3    4</span>
<span class="co">#&gt; [10,]    0    1    2    3    4</span>
<span class="va">cost_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="va">omland_output</span><span class="op">$</span><span class="va">cost</span>, nrow <span class="op">=</span> <span class="fl">10</span>, ncol <span class="op">=</span>  <span class="fl">5</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co"># We can see that intervention packages in some spatial units are more expensive than others</span>
<span class="va">cost_matrix</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5]</span>
<span class="co">#&gt;  [1,]    0    5   10   15   20</span>
<span class="co">#&gt;  [2,]    0    5   10   15   20</span>
<span class="co">#&gt;  [3,]    0    5   10   15   20</span>
<span class="co">#&gt;  [4,]    0    5   10   15   20</span>
<span class="co">#&gt;  [5,]    0    5   10   15   20</span>
<span class="co">#&gt;  [6,]    0   25   50   75  100</span>
<span class="co">#&gt;  [7,]    0   25   50   75  100</span>
<span class="co">#&gt;  [8,]    0   25   50   75  100</span>
<span class="co">#&gt;  [9,]    0   25   50   75  100</span>
<span class="co">#&gt; [10,]    0   25   50   75  100</span></code></pre></div>
<p>With these inputs, we can now use om to optimise</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">optimised</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/om.html">om</a></span><span class="op">(</span>z <span class="op">=</span> <span class="va">impact_matrix</span>, cost <span class="op">=</span> <span class="va">cost_matrix</span>, budget <span class="op">=</span> <span class="va">budget</span><span class="op">)</span>
<span class="va">optimised</span>
<span class="co">#&gt;     i j cost z budget_level_1</span>
<span class="co">#&gt; 1   1 5   20 4             20</span>
<span class="co">#&gt; 2   2 5   20 4             20</span>
<span class="co">#&gt; 3   3 5   20 4             20</span>
<span class="co">#&gt; 4   4 5   20 4             20</span>
<span class="co">#&gt; 5   5 5   20 4             20</span>
<span class="co">#&gt; 6   6 1    0 0              0</span>
<span class="co">#&gt; 7   7 1    0 0              0</span>
<span class="co">#&gt; 8   8 1    0 0              0</span>
<span class="co">#&gt; 9   9 1    0 0              0</span>
<span class="co">#&gt; 10 10 1    0 0              0</span></code></pre></div>
<p>Let’s breakdown Omland’s optimal solution. In the output, <code>i</code> represents the spatial unit and <code>j</code> the intervention package, so for each spatial unit, we have chosen one package. We can also see the <code>cost</code> and <code>impact</code> of each package chosen. In spatial units 1 to 5, we’ve chosen the most expensive package, and in spatial units 6 to 10 Omland doesn’t spend anything. This makes sense - the interventions in spatial unit 1-5 are a lot better value ($s per impact) than in spatial units 5-10!</p>
<p>We can also see that the total cost does not exceed Omland’s budget of $100 - phew!</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">optimised</span><span class="op">$</span><span class="va">cost</span><span class="op">)</span>
<span class="co">#&gt; [1] 100</span></code></pre></div>
<p>We can check to see what happens if Omland’s malaria budget increases:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_budget</span> <span class="op">&lt;-</span> <span class="fl">10000</span>
<span class="va">optimised</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/om.html">om</a></span><span class="op">(</span>z <span class="op">=</span> <span class="va">impact_matrix</span>, cost <span class="op">=</span> <span class="va">cost_matrix</span>, budget <span class="op">=</span> <span class="va">new_budget</span><span class="op">)</span>
<span class="va">optimised</span>
<span class="co">#&gt;     i j cost z budget_level_1</span>
<span class="co">#&gt; 1   1 5   20 4             20</span>
<span class="co">#&gt; 2   2 5   20 4             20</span>
<span class="co">#&gt; 3   3 5   20 4             20</span>
<span class="co">#&gt; 4   4 5   20 4             20</span>
<span class="co">#&gt; 5   5 5   20 4             20</span>
<span class="co">#&gt; 6   6 5  100 4            100</span>
<span class="co">#&gt; 7   7 5  100 4            100</span>
<span class="co">#&gt; 8   8 5  100 4            100</span>
<span class="co">#&gt; 9   9 5  100 4            100</span>
<span class="co">#&gt; 10 10 5  100 4            100</span></code></pre></div>
<p>Great - now Omland can afford the most expensive, and most impactful, intervention package in all sub-national units!</p>
<p>If some sub-national units do not have all intervention package options available we can just replace them with <code>NA</code> in the impact and cost matrices</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">impact_matrix</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span>
<span class="va">cost_matrix</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span>
<span class="va">optimised</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/om.html">om</a></span><span class="op">(</span>z <span class="op">=</span> <span class="va">impact_matrix</span>, cost <span class="op">=</span> <span class="va">cost_matrix</span>, budget <span class="op">=</span> <span class="va">new_budget</span><span class="op">)</span>
<span class="va">optimised</span>
<span class="co">#&gt;     i j cost z budget_level_1</span>
<span class="co">#&gt; 1   1 4   15 3             15</span>
<span class="co">#&gt; 2   2 5   20 4             20</span>
<span class="co">#&gt; 3   3 5   20 4             20</span>
<span class="co">#&gt; 4   4 5   20 4             20</span>
<span class="co">#&gt; 5   5 5   20 4             20</span>
<span class="co">#&gt; 6   6 5  100 4            100</span>
<span class="co">#&gt; 7   7 5  100 4            100</span>
<span class="co">#&gt; 8   8 5  100 4            100</span>
<span class="co">#&gt; 9   9 5  100 4            100</span>
<span class="co">#&gt; 10 10 5  100 4            100</span></code></pre></div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Pete Winskill.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
