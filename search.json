[{"path":"/AGENTS.html","id":"id_-project-structure","dir":"","previous_headings":"","what":"üß© Project Structure","title":"NA","text":"R/ ‚Äî R functions man/ ‚Äî roxygen-generated documentation tests/testthat/ ‚Äî unit tests vignettes/ ‚Äî usage guides (knitr) data/ ‚Äî included datasets .github/workflows/ ‚Äî CI pipelines (R CMD check, linting, pkgdown) _pkgdown.yml ‚Äî site configuration (deployed gh-pages)","code":""},{"path":"/AGENTS.html","id":"id_-coding--style-conventions","dir":"","previous_headings":"","what":"üî® Coding & Style Conventions","title":"NA","text":"Language, naming, comments, commit messages English . Use roxygen2 (e.g.¬†#' @param, @return) documentation. Follow tidyverse style: 2-space indent, spaces around operators. Functions variable names snake_case.","code":""},{"path":"/AGENTS.html","id":"id_-core-coding-principles","dir":"","previous_headings":"","what":"‚úÖ Core Coding Principles","title":"NA","text":"Prioritise clarity readability cleverness. Use pure functions clearly defined inputs outputs possible. Follow Single Responsibility Principle ‚Äî function one thing. Avoid code duplication ‚Äî use helper functions factor repeated logic. Use early returns reduce indentation nesting. Avoid deeply nested logic long functions; split logic modular components. Document every exported function consistent roxygen tags. Use @export public functions .","code":""},{"path":"/AGENTS.html","id":"id_-testing","dir":"","previous_headings":"","what":"üìÑ Testing","title":"NA","text":"package uses testthat unit testing: Mirror function names tests/testthat/test-*.R. Use test_that(‚Äúdescription‚Äù, { ‚Ä¶ }) blocks. Prefer multiple small, readable expectations. Mock external data randomness needed repeatability.","code":""},{"path":"/AGENTS.html","id":"id_-pull-request-checklist","dir":"","previous_headings":"","what":"üßπ Pull Request Checklist","title":"NA","text":"AI-generated pull requests meet criteria: clear, descriptive title summary Related issue referenced (applicable) New tests new modified functions Code passes checks Documentation updated (roxygen /vignette) changes CI, versioning, .github/ files unless requested Branch names opened PRs succinct, concise, clear","code":""},{"path":"/AGENTS.html","id":"id_-build--release-workflow","dir":"","previous_headings":"","what":"üì¶ Build & Release Workflow","title":"NA","text":"Update documentation: devtools::document() Run tests: devtools::test() Run package checks: devtools::check()","code":""},{"path":"/AGENTS.html","id":"id_-scope","dir":"","previous_headings":"","what":"üî≠ Scope","title":"NA","text":"Agents must manually edit: man/ .github/ pkgdown/ data/ data-raw/ DESCRIPTION version number Licence authorship information","code":""},{"path":"/AGENTS.html","id":"id_-tone-and-style-guide-for-vignettes","dir":"","previous_headings":"","what":"üìñ Tone and Style Guide for Vignettes","title":"NA","text":"Vignettes aim : Friendly accessible ‚Äî Write ‚Äôre explaining concepts informed non-expert colleague. Accurate precise ‚Äî Technical correctness essential. Avoid oversimplifying core ideas. Narrative structure ‚Äî Use clear logical flow: introduce purpose, explain context, walk examples. Example-driven ‚Äî Use realistic, well-commented examples demonstrate concepts. Wherever possible, relate examples plausible use cases.","code":""},{"path":"/AGENTS.html","id":"do","dir":"","previous_headings":"üìñ Tone and Style Guide for Vignettes","what":"Do:","title":"NA","text":"Use warm, professional tone: ‚ÄúLet‚Äôs explore function works‚Ä¶‚Äù Explain reasoning well code steps. Show intermediate outputs helpful. can use emoji elements help engagement","code":""},{"path":"/AGENTS.html","id":"dont","dir":"","previous_headings":"üìñ Tone and Style Guide for Vignettes","what":"Don‚Äôt:","title":"NA","text":"Assume deep prior knowledge package internals. Use overly casual language. Skip steps leave important arguments unexplained.","code":""},{"path":"/AGENTS.html","id":"voice-checklist","dir":"","previous_headings":"üìñ Tone and Style Guide for Vignettes","what":"Voice checklist:","title":"NA","text":"Conversational professional unexplained acronyms jargon Every code block context interpretation reader feel guided confident, testedTone Style Guide Vignettes","code":""},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Pete Winskill. Author, maintainer.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Winskill P (2025). om: Optimiation Malaria Budgets. R package version 1.1.1.","code":"@Manual{,   title = {om: Optimiation of Malaria Budgets},   author = {Pete Winskill},   year = {2025},   note = {R package version 1.1.1}, }"},{"path":"/index.html","id":"om-","dir":"","previous_headings":"","what":"Optimiation of Malaria Budgets","title":"Optimiation of Malaria Budgets","text":"om can used find solutions budget-optimisation challenges. might finding optimal mix spatially-targeted intervention packages across country affordable within specified budget envelope. om can also deal optimisations multiple budgets may available different subsets spatial units. example, may want maximise impact global-donor budget optimised across multiple countries, combined contributions domestic budgets country. clever-stuff background handled superb ompr package. Please give appropriate attribution cite ompr package using om (citation(\"ompr\")) sure check ! get started, take look introductory vignette ‚ö†Ô∏è CE frontier functionality WIP - please check outputs Updates, reviews improvements encouraged via PRs! issues clarifications? Please post issues page .","code":""},{"path":"/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Optimiation of Malaria Budgets","text":"can install development version om like :","code":"remotes::install_github(\"mrc-ide/om\")"},{"path":"/reference/allocation_output.html","id":null,"dir":"Reference","previous_headings":"","what":"Wrangle allocations ‚Äî allocation_output","title":"Wrangle allocations ‚Äî allocation_output","text":"Wrangle allocations","code":""},{"path":"/reference/allocation_output.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wrangle allocations ‚Äî allocation_output","text":"","code":"allocation_output(solution, budget)"},{"path":"/reference/allocation_output.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Wrangle allocations ‚Äî allocation_output","text":"solution Model solution budget vector budgets","code":""},{"path":"/reference/allocation_output.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Wrangle allocations ‚Äî allocation_output","text":"Allocation proportions","code":""},{"path":"/reference/brute.html","id":null,"dir":"Reference","previous_headings":"","what":"Brute force search for single budget level ‚Äî brute","title":"Brute force search for single budget level ‚Äî brute","text":"Brute force search single budget level","code":""},{"path":"/reference/brute.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Brute force search for single budget level ‚Äî brute","text":"","code":"brute(z, cost, budget)"},{"path":"/reference/brute.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Brute force search for single budget level ‚Äî brute","text":"z Matrix impact. Rows[] = units, cols[j] = options, fill = impact measure. units options, fill z NA. cost Matrix cost. Rows[] = units, cols[j] = options, fill = cost. units options, fill cost NA. budget vector budgets","code":""},{"path":"/reference/brute.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Brute force search for single budget level ‚Äî brute","text":"Brute force solution","code":""},{"path":"/reference/create_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Create ompr model ‚Äî create_model","title":"Create ompr model ‚Äî create_model","text":"Create ompr model","code":""},{"path":"/reference/create_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create ompr model ‚Äî create_model","text":"","code":"create_model(n, options, z, cost, budget, budget_n, not_recipients, sense)"},{"path":"/reference/create_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create ompr model ‚Äî create_model","text":"n Number units options Maximum number options per unit z Matrix impact. Rows[] = units, cols[j] = options, fill = impact measure. units options, fill z NA. cost Matrix cost. Rows[] = units, cols[j] = options, fill = cost. units options, fill cost NA. budget vector budgets budget_n Number budget levels not_recipients Binary matrix indicating units allowed access given budget level sense Optimisation target, can \"min\" \"max\"","code":""},{"path":"/reference/create_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create ompr model ‚Äî create_model","text":"ompr model","code":""},{"path":"/reference/frontier.html","id":null,"dir":"Reference","previous_headings":"","what":"Cost-effectiveness frontier ‚Äî frontier","title":"Cost-effectiveness frontier ‚Äî frontier","text":"Identify set non-dominated solutions based cost impact.","code":""},{"path":"/reference/frontier.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cost-effectiveness frontier ‚Äî frontier","text":"","code":"frontier(x, convex_hull = FALSE, threshold = Inf)"},{"path":"/reference/frontier.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cost-effectiveness frontier ‚Äî frontier","text":"x Data frame containing `cost` `impact` columns. convex_hull Logical. TRUE, restricts results convex cost-effectiveness frontier removing extendedly dominated strategies (non-monotonic ICERs). FALSE, returns full set non-dominated solutions, may useful exploring cost-effective options change across different budget levels. threshold Optional numeric value describing allowed marginal cost per unit impact gained. identifying frontier, solutions ICERs value discarded. assume start cheapest dominant solution iterate checking ICERs moving solution cost .","code":""},{"path":"/reference/frontier.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Cost-effectiveness frontier ‚Äî frontier","text":"data.frame dominant, ICER compliant solutions","code":""},{"path":"/reference/frontier.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Cost-effectiveness frontier ‚Äî frontier","text":"Solutions filtered remaining option higher cost lower equal impact another. finding dominant solutions optional `threshold` removes ICER given threshold.","code":""},{"path":"/reference/matrix_to_idf.html","id":null,"dir":"Reference","previous_headings":"","what":"Matrix to indexed data.frame ‚Äî matrix_to_idf","title":"Matrix to indexed data.frame ‚Äî matrix_to_idf","text":"Converts matrix data.frame row () column (j) index variables.","code":""},{"path":"/reference/matrix_to_idf.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Matrix to indexed data.frame ‚Äî matrix_to_idf","text":"","code":"matrix_to_idf(x, z = \"z\")"},{"path":"/reference/matrix_to_idf.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Matrix to indexed data.frame ‚Äî matrix_to_idf","text":"x Matrix z Name data.frame column storing matrix values","code":""},{"path":"/reference/matrix_to_idf.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Matrix to indexed data.frame ‚Äî matrix_to_idf","text":"data.frame","code":""},{"path":"/reference/om.html","id":null,"dir":"Reference","previous_headings":"","what":"Optimise budget ‚Äî om","title":"Optimise budget ‚Äî om","text":"Optimise budget","code":""},{"path":"/reference/om.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Optimise budget ‚Äî om","text":"","code":"om(z, cost, budget, recipients = NULL, sense = \"max\")"},{"path":"/reference/om.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Optimise budget ‚Äî om","text":"z Matrix impact. Rows[] = units, cols[j] = options, fill = impact measure. units options, fill z NA. cost Matrix cost. Rows[] = units, cols[j] = options, fill = cost. units options, fill cost NA. budget vector budgets recipients Matrix recipients. Rows[] = units, cols[j] = budget levels, fill = binary indicator show Unit[] access budget[j]. sense Optimisation target, can \"min\" \"max\"","code":""},{"path":"/reference/om.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Optimise budget ‚Äî om","text":"Optimsised solution","code":""},{"path":"/reference/optimise_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Find solution ‚Äî optimise_model","title":"Find solution ‚Äî optimise_model","text":"Find solution","code":""},{"path":"/reference/optimise_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Find solution ‚Äî optimise_model","text":"","code":"optimise_model(model)"},{"path":"/reference/optimise_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Find solution ‚Äî optimise_model","text":"model ompr model specified create_model()","code":""},{"path":"/reference/optimise_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Find solution ‚Äî optimise_model","text":"Model solution","code":""},{"path":"/reference/output.html","id":null,"dir":"Reference","previous_headings":"","what":"Wrangle solution output ‚Äî output","title":"Wrangle solution output ‚Äî output","text":"Wrangle solution output","code":""},{"path":"/reference/output.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wrangle solution output ‚Äî output","text":"","code":"output(solution, z_df, cost_df, budget)"},{"path":"/reference/output.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Wrangle solution output ‚Äî output","text":"solution Model solution z_df data.frame z cost_df data.frame cost budget vector budgets","code":""},{"path":"/reference/output.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Wrangle solution output ‚Äî output","text":"Formatted output","code":""},{"path":"/reference/tidyeval.html","id":null,"dir":"Reference","previous_headings":"","what":"Tidy eval helpers ‚Äî tidyeval","title":"Tidy eval helpers ‚Äî tidyeval","text":"page lists tidy eval tools reexported package rlang. learn using tidy eval scripts packages high level, see dplyr programming vignette ggplot2 packages vignette. Metaprogramming section Advanced R may also useful deeper dive. tidy eval operators {{, !!, !!! syntactic constructs specially interpreted tidy eval functions. mostly need {{, !! !!! advanced operators use simple cases. curly-curly operator {{ allows tunnel data-variables passed function arguments inside tidy eval functions. {{ designed individual arguments. pass multiple arguments contained dots, use ... normal way.   enquo() enquos() delay execution one several function arguments. former returns single expression, latter returns list expressions. defused, expressions longer evaluate . must injected back evaluation context !! (single expression) !!! (list expressions).   simple case, code equivalent usage {{ ... . Defusing enquo() enquos() needed complex cases, instance need inspect modify expressions way. .data pronoun object represents current slice data. variable name string, use .data pronoun subset variable [[.   Another tidy eval operator :=. makes possible use glue curly-curly syntax LHS =. technical reasons, R language support complex expressions left =, use := workaround.   Many tidy eval functions like dplyr::mutate() dplyr::summarise() give automatic name unnamed inputs. need create sort automatic names , use as_label(). instance, glue-tunnelling syntax can reproduced manually :   Expressions defused enquo() (tunnelled {{) need simple column names, can arbitrarily complex. as_label() handles cases gracefully. code assumes simple column name, use as_name() instead. safer throws error input name expected.","code":"my_function <- function(data, var, ...) {   data %>%     group_by(...) %>%     summarise(mean = mean({{ var }})) } my_function <- function(data, var, ...) {   # Defuse   var <- enquo(var)   dots <- enquos(...)    # Inject   data %>%     group_by(!!!dots) %>%     summarise(mean = mean(!!var)) } my_var <- \"disp\" mtcars %>% summarise(mean = mean(.data[[my_var]])) my_function <- function(data, var, suffix = \"foo\") {   # Use `{{` to tunnel function arguments and the usual glue   # operator `{` to interpolate plain strings.   data %>%     summarise(\"{{ var }}_mean_{suffix}\" := mean({{ var }})) } my_function <- function(data, var, suffix = \"foo\") {   var <- enquo(var)   prefix <- as_label(var)   data %>%     summarise(\"{prefix}_mean_{suffix}\" := mean(!!var)) }"}]
